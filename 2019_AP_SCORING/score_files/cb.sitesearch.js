(function(a,b){a.fn.cbSiteSearch=function(k){var f=a(this),e={text:"Search",site:"site",url:"http://sitesearch.collegeboard.org",maxlength:10,appendTo:this,collision:"none",of:null,offset:null,my:"left top",at:"left bottom",formClass:"siteSearchForm",searchInputName:"q",searchInputValue:"",suggestAtChars:2,termsDisplayZIndex:1,termMatchStartsWithOnly:0},i=f.data("cbsitesearch"),c,d,g,j;k=k||{};if(typeof i!="undefined"){if(typeof i=="string"&&i){i=a.parseJSON(i.substring(1,i.length-1));}}c=a.extend({},e,k,i);d='<form name="searchform" action="'+c.url+'"     class="'+c.formClass+'">     <input type="text" class="search-txt-input"         name="'+c.searchInputName+'"         placeholder="'+c.text+'" title="'+c.text+'" />    <input type="hidden" name="searchType" value="'+c.site+'" />    <input type="hidden" name="tp" value="'+c.site+'" />    <input type="submit" class="searchBtn" /></form>';g=a(d).appendTo(this);g.submit(function(m){var l=a(this).find(".search-txt-input").val();l=a.trim(l);if(!l||l===c.text){m.preventDefault();return false;}});j=g.find(".search-txt-input");j.autocomplete({appendTo:a(c.appendTo),position:{my:c.my,at:c.at,collision:c.collision,offset:c.offset},source:function(m,l){a.ajax({url:"//content.atomz.com/autocomplete/sp10/04/43/11",dataType:"jsonp",data:{max_results:1000,query:m.term,beginning:c.termMatchStartsWithOnly},success:function(n){l(h(n,m.term,c));}});},minLength:c.suggestAtChars,select:function(m,l){j.val(l.item.value);g.submit();},create:function(m,l){a(".ui-autocomplete.ui-menu").addClass("cbsearch");},open:function(m,l){a(this).autocomplete("widget").css("z-index",c.termsDisplayZIndex);return true;}});j.attr("value",c.searchInputValue);function h(s,p,o){var t=[],q=a(s),n=q.filter(function(){return this.indexOf(p)===0;}),m=a.makeArray(n).sort(),l,r;if(m.length>o.maxlength){t=m.slice(0,o.maxlength);}else{l=q.filter(function(){return this.indexOf(p)!==0;});r=a.makeArray(l).sort();t=m.concat(r);if(t.length>=o.maxlength){t=t.slice(0,o.maxlength);}}return t;}};})(jQuery);