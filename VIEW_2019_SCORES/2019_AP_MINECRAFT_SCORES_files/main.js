$(document).ready(function(){setTimeout(function(){$("body").addClass("refresh");},2000);setTimeout(function(){$("body").removeClass("refresh").addClass("refresh");},4000);$("input[type='password']").attr("autocomplete","off");OSR_Tools.prepareModals();OSR_Tools.prepareCarousel();OSR_Tools.prepareNavigation();if($("#serverErrorMessage").is(":visible")){$("#serverErrorMessage").focus();}$("#displayUserProfileLink").click(function(){var b=document.location.href.replace(OSR_baseUrl,"");$(this).attr("href",$("#displayUserProfileLink").attr("href")+"?nextAction="+b);return true;});if($("#send_scores_terms").length>0){if(!$("#termsAccepted").is(":checked")){var a=$(document).scrollTop()+100;$("#send_scores_terms").css({top:a+"px",position:"absolute"}).modal("show");}$(document).keyup(function(b){if(b.keyCode===27){if($("#send_scores_terms").is(":visible")){document.location.href="cancelSendScores.action";return;}}});}$("#termsAccept").change(function(){$("#quickViewCont").prop("disabled",!this.checked);});$("[data-cbsitesearch]").cbSiteSearch({site:"aps_site",text:"Search AP",url:"https://apstudent.collegeboard.org/search",formClass:"cbsitesearch",searchInputName:"searchq",termsDisplayZIndex:20});});var OSR_Tools={session_duration:1140000,session_duration_before_warn:1020000,session_notify_timeout:null,session_stop_timeout:null,session_timeout_currently_opened_modal:"",showLoading:function(a){var b=$('<div class="modal-foredrop" style="height: '+a.height()+'px;"><span>Please wait, system processing...</span></div>');a.prepend(b);b.focus();b.on("keyup.loading.overlay keydown.loading.overlay keypress.loading.overlay",function(c){c.preventDefault();c.stopPropagation();return false;});},hideLoading:function(a){$(".modal-foredrop",a).remove();},prepareAccordion:function(){$(document).on("click keydown",".js-expand-all",function(a){if((a.type==="keydown"&&a.which===13)||a.type==="click"){$(".accordion.styled .collapse").each(function(){if(!$(this).hasClass("in")){$(this).collapse("show");}});return false;}});$(document).on("click keydown",".js-collapse-all",function(a){if((a.type==="keydown"&&a.which===13)||a.type==="click"){$(".accordion.styled .collapse").each(function(){if($(this).hasClass("in")){$(this).collapse("hide");}});return false;}});$(".collapse").on("show",function(){$(this).closest("li").addClass("expanded");$('a[href="#'+this.id+'"]').removeClass("collapsed");var a=$(this).closest("li").index()+1;$(this).closest("li").find("b.caret span.visuallyhidden").html("Collapse Question "+a);$(this).closest("li").find("a.accordion-toggle").attr("title","Collapse Question "+a);}).on("hide",function(){$(this).closest("li").removeClass("expanded");$('a[href="#'+this.id+'"]').addClass("collapsed");var a=$(this).closest("li").index()+1;$(this).closest("li").find("b.caret span.visuallyhidden").html("Expand Question "+a);$(this).closest("li").find("a.accordion-toggle").attr("title","Expand Question "+a);});},prepareCarousel:function(){$(".carousel").each(function(){var a=Math.max.apply(null,$(".carousel-inner li",this).map(function(){return $(this).height();}).get());$(".carousel-inner li",this).height(a+"px");});$(".carousel").carousel({interval:null}).on("slid",function(d){var c=$(".carousel-inner li.active",d.target).index()+1;var b=$(".carousel-inner li").length;var a="Show slide "+((c+1)>b?1:c+1)+" of "+b;var f="Show slide "+((c-1)<1?b:c-1)+" of "+b;$('[href="#'+d.target.id+'"][data-slide="next"]').attr("title",a).find(".visuallyhidden").html(a);$('[href="#'+d.target.id+'"][data-slide="prev"]').attr("title",f).find(".visuallyhidden").html(f);$(".carousel-slide-indicator",d.target).html("Current slide is "+c+" of "+b);});},prepareModals:function(){$(".modal").on("hide",function(){if(this.id=="csr-order-resent"){document.location.reload();}});$(".modal").on("shown",function(){$(".modal-backdrop").html('<div class="visible-print"><img src="/img/modal-backdrop-image.png" ></div>');});$(".modal").on("shown",function(){$(".close",this).focus();var a=this.id;if(a==="send_scores_terms"){printWebAnalytics("apscore:sendscores-disclaimer");}else{if(a==="find_highschool"){printWebAnalytics("apscore:findhighschool");}else{if(a==="cancel_order"){printWebAnalytics("apscore:sendscores-cancelorder");}else{if(a==="go_to_profile"){printWebAnalytics("apscore:sendscores-changeaddress");}else{if(a==="cancel-order"){printWebAnalytics("apscore:cancel-order-confirmation");}else{if(a==="order-canceled"){printWebAnalytics("apscore:cancel-placed-order");}else{if(a==="signin-form"){printWebAnalytics("apscore:loginpage");}else{if(a==="cannot_find_school"){printWebAnalytics("apscore:highschoolnotlisted");}else{if(a==="msg-sent"){printWebAnalytics("apscore:contactus-thanks");}else{if(a==="find_ap_number"){printWebAnalytics("apscore:requestapnumber");}else{if(a==="find_ap_number"){printWebAnalytics("apscore:requestapnumber");}else{if(a==="find_student_id"){printWebAnalytics("apscore:findstudentid");}else{if(a==="delivery_options"){printWebAnalytics("apscore:sendscores-deliveryoptions");}else{if(a==="change-name"){printWebAnalytics("apscore:changename");}else{if(a==="withhold-detail"){printWebAnalytics("apscore:optionalservicerequests");if($("#withhold-detail .modal-body").html()===""){OSR_Tools.showLoading($("#withhold-detail"));$("#withhold-detail .modal-body").load("viewWithholds.action",function(){OSR_Tools.hideLoading($("#withhold-detail"));});}}else{if(a==="csr-cancel-order"){printWebAnalytics("apscore:cancel-placed-order");}else{if(a==="csr-order-canceled"){printWebAnalytics("apscore:cancel-order-confirmation");}else{if(a==="missing-scores"){printWebAnalytics("apscores:missingscorespopup");}else{if(a==="quick_view_ap_number"){printWebAnalytics("apscores:apnumberentry");}}}}}}}}}}}}}}}}}}}});$("#signin-form").on("show",function(){$("#inputPassword, #inputUsername").val("");var b=$.deparam.fragment(document.location.href),a;if(b.scores!==undefined){a=$("#destinationPageDefault").val();}else{a=document.location.href.substring(0,document.location.href.indexOf("#m="));}$("#destinationPage").val($.trim(a));});doRouting();},prepareNavigation:function(){var a=document.location.href.match(/([a-zA-Z]+.action)/);if(a){$("#siteNavigation ul.primary li.active li").each(function(){if($("a",this).attr("href")===a[0]){$(this).addClass("active");}});}},prepareCustomSelectbox:function(){if($.fn.select2){$("select.styled").select2({minimumResultsForSearch:"-1"});$(".select2-container").each(function(){var a=this.id.replace("s2id_","");$(this).attr("title",$("#"+a).attr("title"));});}},pdfModal:function(b,a){if($.cookie("osrHidePdfIntersistial")==="true"){popup(b,"PDFdocument",a,950,750);}else{$("#pdfContinueBtn").click(function(){$("#pdfModal").modal("hide");popup(b,"PDFdocument",a,950,750);});$("#pdfHideCheckbox").click(function(){if($(this).is(":checked")){$.cookie("osrHidePdfIntersistial",true);}else{$.cookie("osrHidePdfIntersistial",false);}});var c=$(document).scrollTop()+100;$("#pdfModal").css({top:c+"px",position:"absolute"}).modal("show");}return false;},getUrlVars:function(){var b={};var a=window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(c,d,e){b[d]=e;});return b;},preparePopovers:function(){$("body").on("hover focus","[rel=popover]",function(a){$(".popover-open").not($(this)).popover("hide").removeClass("popover-open");$(this).addClass("popover-open");a.stopPropagation();});$("body").on("click focus",function(b){var a=$(b.target);if((a.attr("rel")!=="popover"&&a.closest("a").attr("rel")!=="popover"&&!a.hasClass("js-generate-popover")&&a.closest(".popover").length===0)||a.closest(".popover-close").length>0){$(".popover-open").popover("hide").removeClass("popover-open");}});$("body").on("mouseleave",".popover",function(a){$(".popover-open").popover("hide").removeClass("popover-open");});},prepareDownloadPdfPopover:function(){$("#downloadPdf").popover({html:true,content:'Requires <a href="http://get.adobe.com/reader/" target="_blank" title="Opens in new window" onblur=\'$("#downloadPdf").popover("hide");\'>Adobe Acrobat Reader</a> <i>(latest version recommended).</i>',placement:"bottom",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><div class="popover-content"><p></p></div></div></div>',trigger:"manual"});$("#downloadPdf").on("mouseover focus",function(){if($(".popover:visible").length===0){$("#downloadPdf").popover("show");}});},checkSession:function(){this.setSessionTimers();var a=this;$("#continueSessionBtn").click(function(){a.resumeSession();$("#session-expires").modal("hide");if(a.session_timeout_currently_opened_modal){$("#"+a.session_timeout_currently_opened_modal).modal("show");a.session_timeout_currently_opened_modal="";}});$("#completeSessionBtn").click(function(){a.completeSession();});},notifyAboutSessionExpiration:function(){if($(".modal:visible").length>0){this.session_timeout_currently_opened_modal=$(".modal:visible").attr("id");$("#"+this.session_timeout_currently_opened_modal).modal("hide");}var a=$(document).scrollTop()+100;$("#session-expires").css({top:a+"px",position:"absolute"}).modal("show");},resumeSession:function(){var a=this;$.ajax({url:OSR_baseUrl+"/creditandplacement/sessionExtendAction.action",type:"get",success:function(b,d,c){if(b=="OK"){clearTimeout(a.session_stop_timeout);clearTimeout(a.session_notify_timeout);a.setSessionTimers();}else{a.completeSession();}},error:function(c,d,b){a.completeSession();}});},setSessionTimers:function(){var a=this;a.session_notify_timeout=setTimeout(function(){a.notifyAboutSessionExpiration();},a.session_duration_before_warn);a.session_stop_timeout=setTimeout(function(){a.completeSession();},a.session_duration);},completeSession:function(){document.location.href=$("#logoutLink").attr("href");}};function activateMenuItems(d,a){var c=$("#siteNavigation ul.primary > li > a");for(var b=c.length;b>0;b--){if($(c[b-1]).attr("href").indexOf(d)>=0){$(c[b-1]).parent("li").addClass("active");break;}}if(a){var f=$("#siteNavigation li.active ul.secondary > li > a");var e=f.length;if(e){for(var b=0;b<e;b++){if($(f[b]).attr("href").indexOf(a)>=0){$(f[b]).parent("li").addClass("active");break;}}}}}function switchAwardsLinkName(c,b){var a=c==="show"?"Show my awards":"Hide my awards";if(b){$("span",b).html(a);}else{$(".awards .dropdown-toggle span").html(a);}}function dropdownAccessibility(){$(".dropdown-menu").on("keydown","li:last-child a",function(a){if((a.which===9)&&!(a.shiftKey)){$(".dropdown").removeClass("open");if($(this).parents(".awards").length>0){switchAwardsLinkName("show",$(this).parents(".awards").find(".dropdown-toggle"));}}});$(".dropdown-menu").on("keydown","li:first-child a",function(a){if((a.which===9)&&(a.shiftKey)){$(".dropdown").removeClass("open");if($(this).parents(".awards").length>0){switchAwardsLinkName("show",$(this).parents(".awards").find(".dropdown-toggle"));}}});$("body").on("touchstart.dropdown",".dropdown-menu",function(a){a.stopPropagation();});$("div.awards").each(function(){var a=$(".dropdown-tools",this);$(document).mouseup(function(b){if(a.has(b.target).length===0){switchAwardsLinkName("show",a);}});});$("div.awards .dropdown-menu a").click(function(){switchAwardsLinkName("show",$(this).closest(".dropdown-tools"));return true;});$("div.awards .dropdown-toggle").on("mousedown keydown",function(b){if(b.which===1||b.which===13){var a=$(this).closest(".dropdown");if($(a).hasClass("open")){switchAwardsLinkName("show",this);}else{switchAwardsLinkName("hide",this);}}return true;});}function doRouting(){$(".modal").on("shown",function(){$(".close",this).focus();});$(".modal").on("keyup",function(a){if(a.keyCode===9){if($(":focus",document).get(0)===undefined){$(".close",this).focus();}}});$(document).keyup(function(b){if(b.keyCode===27){var a=$.bbq.getState("m");if(a&&a!=="send_scores_terms"){$.bbq.pushState("#/");}}});$(".modal").on("hidden",function(){$('a[href="#m='+this.id+'"]').focus();});$('.modal [data-dismiss="modal"]').click(function(a){$.bbq.pushState("#/");});$(window).bind("hashchange",function(){var c=$.bbq.getState("m");var a=$("#"+c);if($(".modal.modal-secure").length==0||$(".modal.modal-secure").is(":not(:visible)")){if(c!==undefined&&c!==""&&a.hasClass("modal")){$(".modal:not(thisModal)").modal("hide");if(a.is(":not(:visible)")){var d=$(document).scrollTop()+100;a.css({top:d+"px",position:"absolute"}).modal("show");}}else{var b=$.bbq.getState();if(b["/"]===""){$(".modal:visible").modal("hide");}}}}).trigger("hashchange");}function calculateAge(d,c,h){var f=new Date();var g=f.getFullYear();var a=f.getMonth()+1;var e=f.getDate();var b=g-h;if(a<d-1){b--;}if((d===a)&&e<c){b--;}return b;}function isValidDate(c,a,b){var e=new Date(c+"/"+a+"/"+b);return e&&e.getMonth()===(c-1)&&e.getFullYear()===b&&e.getDate()===a;}function prepareCountryDependanceFields(b,a){if($(a).is(":checked")){$(b+" .outsideUsOnly").show();$(b+" .insideUsOnly").hide();if($(b+" #inputCountry").val()==="CA"){$(b+" .canadaOnly").show();$(b+" .ukOnly").hide();}else{if($(b+" #inputCountry").val()==="GB"){$(b+" .canadaOnly").hide();$(b+" .ukOnly").show();}else{$(b+" .canadaOnly").hide();$(b+" .ukOnly").hide();}}}else{$(b+" .outsideUsOnly").hide();$(b+" .canadaOnly").hide();$(b+" .ukOnly").hide();$(b+" .insideUsOnly").show();}}function popup(b,e,f,g,d,a,j,c,i){if(e===undefined){e="popup";}if(g===undefined){g=600;}if(d===undefined){d=570;}if(a===undefined){a="yes";}if(j===undefined){j="yes";}if(c===undefined){c="no";}if(i===undefined){i="no";}newWin=window.open(b,e,"width="+g+",height="+d+",resizable="+a+",scrollbars="+j+",menubar="+c+",toolbar="+i);newWin.focus();if(f){printWebAnalytics(f);}return newWin;}function printWebAnalytics(a){if((typeof s)!=="undefined"&&s!==null){s.pageName=a;if(s.eVar16!==undefined){delete s.eVar16;}if(s.event79!==undefined){delete s.event79;}if(s.purchaseId!==undefined){delete s.purchaseId;}if(s.events!==undefined){delete s.events;}if(s.products!==undefined){delete s.products;}if(s.eVar65!==undefined){delete s.eVar65;}s.t();}}function policySearchWebAnalitics(a,b){if((typeof s)!=="undefined"&&s!==null){s.prop1=a;s.prop3="APCredit";s.eVar1=a;s.eVar3="APCredit";s.events="event1,event49";if(b){s.pageName="apscore/creditandplacement/search-credit-results";}else{}s.t();}}